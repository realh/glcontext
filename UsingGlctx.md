# How to use glcontext in your code #

Once installed in Unix or with MinGW you can use pkg-config to add flags to your compiler commands; the package name is "glcontext". Alternatively it provides FindGLContext.cmake to help use glcontext in another cmake project.

## Headers ##

The API defines a small number of functions and types; the main header file [<glctx/glctx.h>](https://code.google.com/p/glcontext/source/browse/glctx/glctx.h) provides the definitive reference through its comments and declarations, and the[test code](https://code.google.com/p/glcontext/source/browse/tests/glctx-test.c) demonstrates how to use it, in particular with SDL, but I will also explain below how to use the main functions.

Macro definitions which are set up by the CMake configuration process are in <glctx/glctx-config.h>. The macro names can be [browsed here](https://code.google.com/p/glcontext/source/browse/glctx-config.h.in), but the values depend on installation.

If you want to use these macros in your code but are also using a GL function loader such as GLEW, you can include <glctx/glctx-config.h> first, but <GL/glew.h> or equivalent must be included before <glctx/glctx.h>.

<glctx/glctx\_export.h> is generated by cmake to define GLCTX\_EXPORT to support Windows DLLs where necessary.

## Functions ##

Explained approximately in the order they should be used.

### Logging ###

By default the library doesn't output any messages, but you can make it do so by calling `glctx_set_log_function` to provide a `GlctxLogFunction`. The signature of such a function is the same as `printf`. To disable logging again pass `NULL`.

### Initialisation ###

The first step is to obtain a `GlctxHandle` by calling `glctx_init`. The handle saved in the location pointed to by its final parameter is used in all further functions. The `display` and `window` parameters are of types dependent on the platform. At this point `display` is compulsory for Linux and Windows, but ignored on Raspberry Pi, and should be EGL\_DEFAULT\_DISPLAY on Android. `window` here is ignored except when using GLX, where if not `None` it can be used to ensure glcontext chooses the correct X screen for it. On Raspberry Pi bear in mind that OpenGL ES is not associated with a window; glcontext only supports using the entire screen.

Having these separate `display` and `window` parameters may seem slightly inconvenient, but in Linux/Unix it gives you the option of not creating a window until after getting an OpenGL config.

### Getting, activating and using a config ###

The next step is to get an OpenGL config with `glctx_get_config`. If it succeeds you can activate the context with `glctx_activate`. Now you're ready to call OpenGL (ES) functions, although you may need to load those first.

After rendering a frame use `glctx_flip` to swap buffers and display it on the screen.

To stop using OpenGL call `glctx_terminate`; this probably isn't strictly necessary when shutting down your application, but it's good practice.

### Threading ###

If you want to render on a different thread, first call `glctx_unbind` in the thread that currently owns the context, then call `glctx_bind` in the new thread.

## See Also ##

For Raspberry Pi support check RaspberryPi.